<?xml version="1.0" encoding="utf-8"?>
<odoo> <!-- Code Checked & Confirmed by Panos on ../../2022 -->
    <data>

<!-- https://bitbucket.org/kncltd/addons_custom_10/src/master/knc_custom_addon/report/waybill_report.xml -->
        <template id="report_waybill_document">
        <t t-call="web.external_layout">
            <t t-set="doc" t-value="doc.with_context({'lang':doc.partner_id.lang})"/>
           	<div class="page" style="font-size:13px !important; margin-left:-15px; background-color:transparent;">
                <div class="oe_structure"/>
                <!-- Document Information Start -->
                <div class="row" id="header">
                    <div>
                        <!-- Sale Customer -->
                        <div class="col-xs-4">
                            <t>
                                <strong>Customer Details</strong>
                                <div t-field="doc.partner_id.name" style="border-top: 1px solid #ccc;"/>
                                    <!-- Work Address -->
                                <div>
                                    <div>
                                      <span t-if="doc.partner_id.street"><span t-field="doc.partner_id.street"/></span>
                                    </div>
                                    <div>
                                        <span t-if="doc.partner_id.street2"><span t-field="doc.partner_id.street2"/></span>
                                    </div>
                                    <div>
                                        <span t-if="doc.partner_id.city"><span t-field="doc.partner_id.city"/>,</span>
                                        <span t-field="doc.partner_id.zip"/>
                                    </div>
                                    <div>
                                        <span t-if="doc.partner_id.state_id"><span t-field="doc.partner_id.state_id.name"/>,</span>
                                        <span t-field="doc.partner_id.country_id.name"/>
                                    </div>
                                </div>
                                  <!-- Home Address IF NOT Work Address -->
                                <div t-if="not doc.partner_id.street and not doc.partner_id.street2 and not doc.partner_id.city and not doc.partner_id.zip and not doc.partner_id.state_id and not doc.partner_id.country_id">
                                    <div>
                                        <span t-if="doc.partner_id.street"><span t-field="doc.partner_id.street"/></span>
                                    </div>
                                    <div>
                                            <span t-if="doc.partner_id.street2"><span t-field="doc.partner_id.street2"/></span>
                                    </div>
                                    <div>
                                        <span t-if="doc.partner_id.city"><span t-field="doc.partner_id.city"/>,</span>
                                        <span t-field="doc.partner_id.zip"/>
                                    </div>
                                    <div>
                                        <span t-if="doc.partner_id.state_id"><span t-field="doc.partner_id.state_id.name"/></span>
                                        <span t-field="doc.partner_id.country_id.name"/>
                                    </div>
                                </div>
                            </t>
                        </div>
                    		<!-- Delivery Customer -->
		                    <div class="col-xs-4">
		                        <t>
		                            <t t-if="doc.partner_shipping_id">
                                        <t t-if="not doc.waybill_type=='pickup'">
                                            <strong>Delivery Address</strong>
                                        </t>
                                        <t t-if="doc.waybill_type=='pickup'">
                                            <strong>Pickup Address</strong>
                                        </t>
		                                <div t-field="doc.partner_shipping_id.dis_name" style="border-top: 1px solid #ccc;"/>
		                                <!-- Work Address -->
		                                <div>
                                            <div>
                                                <span t-if="doc.partner_shipping_id.street"><span t-field="doc.partner_shipping_id.street"/></span>
                                            </div>
                                            <div>
                                                <span t-if="doc.partner_shipping_id.street2"><span t-field="doc.partner_shipping_id.street2"/></span>
                                            </div>
                                            <div>
                                                <span t-if="doc.partner_shipping_id.city"><span t-field="doc.partner_shipping_id.city"/>,</span>
                                                <span t-field="doc.partner_shipping_id.zip"/>
                                            </div>
                                            <div>
                                                <span t-if="doc.partner_shipping_id.state_id"><span t-field="doc.partner_shipping_id.state_id.name"/>,</span>
                                                <span t-field="doc.partner_shipping_id.country_id.name"/>
                                            </div>
                                        </div>
                                        <!-- Home Address IF NOT Work Address -->
                                        <div t-if="not doc.partner_shipping_id.street and not doc.partner_shipping_id.street2 and not doc.partner_shipping_id.city and not doc.partner_shipping_id.zip and not doc.partner_shipping_id.state_id and not doc.partner_shipping_id.country_id">
                                            <div>
                                                <span t-if="doc.partner_shipping_id.ot_street"><span t-field="doc.partner_shipping_id.ot_street"/></span>
                                            </div>
                                            <div>
                                                    <span t-if="doc.partner_shipping_id.ot_street2"><span t-field="doc.partner_shipping_id.ot_street2"/></span>
                                            </div>
                                            <div>
                                                <span t-if="doc.partner_shipping_id.ot_city"><span t-field="doc.partner_shipping_id.ot_city"/>,</span>
                                                <span t-field="doc.partner_shipping_id.ot_zip"/>
                                            </div>
                                            <div>
                                                <span t-if="doc.partner_shipping_id.ot_state_id"><span t-field="doc.partner_shipping_id.ot_state_id.name"/></span>
                                                <span t-field="doc.partner_shipping_id.ot_country_id.name"/>
                                            </div>
                                        </div>
		                            </t>
		                        </t>
		                    </div>
		                    <!-- Document Title -->
                        <div class="col-xs-4 text-center">
                            <h3>
                                <span><strong>Waybill</strong></span>
                            </h3>
                            <h3 style="margin-top: 10px; margin-bottom: 13px">
                                <strong><span t-field="doc.name"/></strong>
                            </h3>
                            <img class="barcode" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;humanreadable=0' % ('Code128', doc.name, 200, 25)"/>
                        </div>
                    </div>
                </div>

                <div class="mt32 mb32" id="informations">
                    <div class="row">
                        <!-- Contact Person -->
		                    <div class="col-xs-4">
		                        <strong>Contact Person</strong>
		                        <t t-if="doc.contact_id">
		                            <p style="border-top: 1px solid #ccc;"><span t-field="doc.contact_id.title.shortcut"/> <span t-field="doc.contact_id.dis_name"/></p>
		                        </t>
		                        <t t-if="not doc.contact_id">
		                            <p style="border-top: 1px solid #ccc;">-</p>
		                        </t>
		                    </div>
                        <!-- Contact Person Email -->
		                    <div  class="col-xs-4">
		                        <strong>Contact Email</strong>
		                        <t t-if="doc.contact_id.email">
		                            <p t-field="doc.contact_id.email" style="border-top: 1px solid #ccc;"/>
		                        </t>
		                        <t t-if="not doc.contact_id.email and doc.contact_id.email">
		                            <p t-field="doc.contact_id.email" style="border-top: 1px solid #ccc;"/>
		                        </t>
		                        <t t-if="not doc.contact_id.email and not doc.contact_id.email and doc.contact_id.parent_id.email">
		                            <p t-field="doc.contact_id.parent_id.email" style="border-top: 1px solid #ccc;"/>
		                        </t>
		                        <t t-if="doc.contact_id.parent_id and not doc.contact_id.parent_id.email and not doc.contact_id.email and not doc.contact_id.email">
		                            <p style="border-top: 1px solid #ccc;">-</p>
		                        </t>
		                        <t t-if="not doc.contact_id.parent_id and not doc.contact_id.parent_id.email and not doc.contact_id.email and not doc.contact_id.email">
		                            <p style="border-top: 1px solid #ccc;">-</p>
		                        </t>
		                        <t t-if="not doc.contact_id">
		                            <p style="border-top: 1px solid #ccc;">-</p>
		                        </t>
		                    </div>
		                    <!-- Document Details -->
		                    <div class="col-xs-2">
                        		<strong>Issued Date</strong>
                            <t t-if="doc.issued_date">
																<p t-field="doc.issued_date" t-options='{"format": "dd/MM/YYYY"}' style="border-top: 1px solid #ccc;"/>
		                        </t>
		                        <t t-if="not doc.issued_date">
		                            <p style="border-top: 1px solid #ccc;">-</p>
		                        </t>
                        </div>
                        <div class="col-xs-2">
                            <strong>Prepared by</strong>
                            <t t-if="doc.issued_by_id">
                                <p t-field="doc.issued_by_id.name" style="border-top: 1px solid #ccc;"/>
                            </t>
                            <t t-if="not doc.issued_by_id">
                                <p style="border-top: 1px solid #ccc;">-</p>
                            </t>
                        </div>
                    </div>

                    <div class="row">
                    		<!-- Contact Person Phones -->
                        <div class="col-xs-2">
                            <strong>Mobile</strong>
                            <t t-if="doc.contact_id.mobile">
                                <p t-field="doc.contact_id.mobile" style="border-top: 1px solid #ccc;"/>
                            </t>
                            <t t-if="not doc.contact_id.mobile">
                                <p style="border-top: 1px solid #ccc;">-</p>
                            </t>
                        </div>

                        <div class="col-xs-2">
                            <strong>Phone</strong>
                            <t t-if="doc.contact_id.phone">
                                <p t-field="doc.contact_id.phone" style="border-top: 1px solid #ccc;"/>
                            </t>
                            <t t-if="not doc.contact_id.phone and doc.contact_id.parent_id.phone">
                                <p t-field="doc.contact_id.parent_id.phone" style="border-top: 1px solid #ccc;"/>
                            </t>
                            <t t-if="doc.contact_id.parent_id and not doc.contact_id.parent_id.phone and not doc.contact_id.phone">
                                <p style="border-top: 1px solid #ccc;">-</p>
                            </t>
                            <t t-if="not doc.contact_id.parent_id and not doc.contact_id.phone">
                                <p style="border-top: 1px solid #ccc;">-</p>
                            </t>
                        </div>

                        <div class="col-xs-2">
                            <strong>Fax</strong>
                            <t t-if="doc.contact_id.fax">
                                <p t-field="doc.contact_id.fax" style="border-top: 1px solid #ccc;"/>
                            </t>
                            <t t-if="not doc.contact_id.fax and doc.contact_id.parent_id.fax">
                                <p t-field="doc.contact_id.parent_id.fax" style="border-top: 1px solid #ccc;"/>
                            </t>
                            <t t-if="doc.contact_id.parent_id and not doc.contact_id.parent_id.fax and not doc.contact_id.fax">
                                <p style="border-top: 1px solid #ccc;">-</p>
                            </t>
                            <t t-if="not doc.contact_id.parent_id and not doc.contact_id.fax">
                                <p style="border-top: 1px solid #ccc;">-</p>
                            </t>
                        </div>
                        <div class="col-xs-2">
                                <strong>Client #</strong>
                                <t t-if="doc.partner_id.id">
                                        <p t-field="doc.partner_id.id" style="border-top: 1px solid #ccc;"/>
                                </t>
                                <t t-if="not doc.partner_id.id">
                                <p style="border-top: 1px solid #ccc;">-</p>
                            </t>
                        </div>
                        <div class="col-xs-4">
                            <strong>Delivery Method</strong>
                            <t t-if="doc.waybill_type">
                                <p style="border-top: 1px solid #ccc;"><span t-field="doc.waybill_type"/> / <span t-field="doc.state"/></p>
                            </t>
                            <t t-if="not doc.waybill_type">
                                <p style="border-top: 1px solid #ccc;">-</p>
                            </t>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-6">
                            <strong>Project Reference</strong>
		                        <t t-if="doc.project_id">
		                            <p t-field="doc.project_id" style="border-top: 1px solid #ccc;"/>
		                        </t>
		                        <t t-if="not doc.project_id">
		                            <p style="border-top: 1px solid #ccc;">-</p>
		                        </t>
                        </div>
                        <div class="col-xs-2">
                            <strong>Origin</strong>
		                        <t t-if="doc.order_id">
		                            <p t-field="doc.order_id" style="border-top: 1px solid #ccc;"/>
		                        </t>
		                        <t t-if="not doc.order_id">
		                            <p style="border-top: 1px solid #ccc;">-</p>
		                        </t>
                        </div>
                        <div class="col-xs-4">
                            <strong>Delivery Note Reference</strong>
                            <t t-if="doc.note_ref">
		                            <p t-field="doc.note_ref" style="border-top: 1px solid #ccc;"/>
		                        </t>
		                        <t t-if="not doc.note_ref">
		                            <p style="border-top: 1px solid #ccc;">-</p>
		                        </t>
                        </div>
                    </div>
                </div>
<!-- Document Information End -->

                <table class="table table-condensed table-striped mt24">
                    <thead>
                        <tr>
                        		<!-- Line Sequence -->
                            <th class="text-center">
                            		<strong>Pos<br/>#</strong>
                            </th>
                        		<!-- Line Image -->
                        		<th class="text-center">
                        				<strong>Product<br/>Image</strong>
                        		</th>
                            <!-- Line Description -->
                            <th class="text-left">
                            		<strong>Product Description<br/>Product Notes</strong>
                            </th>
                            <!-- Line Delivered Quantity -->
                            <th class="text-center">
                                <strong>Delivered<br/>Quantity</strong>
                            </th>
                            <!-- Line LOT / Serial -->
                            <th class="text-left">
                            		<strong>LOT&#160;/&#160;Serial<br/>Number</strong>
                           	</th>
                            <!-- Label Reference -->
                            <th class="text-center">
                                <strong>Label<br/>Reference</strong>
                            </th>
                            <!-- Line Check -->
                            <th class="text-center">
                                <strong>Line<br/>Check</strong>
                            </th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr t-foreach="doc.bill_lines" t-as="line">
                            <!-- Line Sequence -->
                            <td class="text-center">
                            		<strong><span t-esc="line_index + 1"/>.</strong>
                            </td>
                            <!-- Line Image -->
                            <t class="text-center">
                                <td width="7%">
                                    <span>
                                    		<img t-if="line.product_id.image" t-att-src="'data:image/png;base64,%s' % line.product_id.image_small" style="max-height: 50px; max-width: 50px;"/>
                                    </span>
                                </td>
                            </t>
                            <!-- Line Description -->
                            <td class="text-left">
                            		<strong>[<span t-field="line.product_id.default_code"/>]</strong>
                                <strong><span t-field="line.product_id.name"/></strong>
                                <strong>(<span t-field="line.product_id.version"/>)</strong>
                                <t t-if="line.product_id.desc_attribute">
                                		<span style="color:black;"><br/>Attributes : <span t-field="line.product_id.desc_attribute"/></span>
                                </t>
                                <t t-if="line.section_id.name">
                                		<span style="color:black;"><br/>Install Note : <span t-field="line.section_id.name"/></span>
                                </t>
                                <t t-if="line.note">
                                		<span style="color:blue;"><br/><strong><i>Product Note : <span t-field="line.note"/></i></strong></span>
                                </t>
                            </td>
                            <!-- Line Delivered Quantity -->
                            <td class="text-center">
                            	<strong><span t-field="line.qty"/></strong><br/>
                            	<strong><span t-field="line.product_uom_id.name"/></strong>
                            </td>
                            <!-- Line LOT / Serial -->
                            <td class="text-left">
                                <!--<span t-field="line.lot_id.name"/>-->
                                <span t-esc="', '.join(map(lambda x: (x.name), line.lot_id))"/>
                            </td>
                            <!-- Label Reference -->
                            <td class="text-center">
                                <strong><span t-field="line.ref"/></strong>
                            </td>
                            <!-- Line Check -->
                            <td class="text-center">
                            		<strong><br/>. . . .</strong>
                            </td>
                        </tr>
                    </tbody>
                </table>

		            <hr/>

                <div name="signatures_proof" style='page-break-inside:avoid !important;'>
		                <tr>
				                <div class="row" name="signatures-1">
				               			<div class="col-xs-3 text-left" style="padding-right: 8px;">
				               					<strong>Delivered by :</strong>
				                        <t t-if="doc.delivered_by_id">
				                            <p style="border-bottom: 1px solid #606060; margin-right: 0px; margin-top: 8px; text-align: center;"><span t-field="doc.delivered_by_id.name"/></p>
				                        </t>
				                        <t t-if="not doc.delivered_by_id">
				                            <p style="border-bottom: 1px solid #606060; margin-right: 0px; margin-top: 8px; text-align: center; color: #d1d1d1;">FULL NAME</p>
				                        </t>
				                		</div>

				                		<div class="col-xs-5 text-left" style="padding-right: 8px; padding-left: 8px">
				                				<strong>Received by :</strong>
				                				<t t-if="doc.received_by_company">
				                        		<p style="border-bottom: 1px dashed #606060; margin-right: 0px; margin-top: 8px; text-align: center;"><span t-field="doc.received_by_company"/></p>
				                        </t>
				                        <t t-if="not doc.received_by_company">
				                        		<p style="border-bottom: 1px dashed #606060; margin-right: 0px; margin-top: 8px; text-align: center; color: #d1d1d1;">ON BEHALF OF FULL COMPANY NAME</p>
				                        </t>
				                		</div>

				                		<div class="col-xs-4 text-left" style="padding-left: 8px">
				                				<strong>Full Name / Phone :</strong>
				                        <t t-if="doc.received_by">
				                            <p style="border-bottom: 1px dashed #606060; margin-right: 0px; margin-top: 8px; text-align: center;"><span t-field="doc.received_by"/>
				                            <t t-if="doc.received_by_phone"> / <span t-esc="(doc.received_by_phone).replace('+357 ','')"/></t></p>
				                        </t>
				                        <t t-if="not doc.received_by">
				                            <p style="border-bottom: 1px dashed #606060; margin-right: 0px; margin-top: 8px; text-align: center; color: #d1d1d1;">RECIPIENT FULL NAME / PHONE</p>
				                        </t>
				                		</div>
				                </div>
				            </tr>

		                <div style="margin: 10px;"></div>

		                <tr t-if="doc.waybill_type not in ['courier','dropship']">
				                <div class="row" name="signatures-2">
				                		<div class="col-xs-3 text-left" style="padding-right: 8px;">
				               					<strong>Delivery Date :</strong>
				                				<t t-if="doc.waybill_date">
				                        		<p style="border-bottom: 1px solid #606060; margin-right: 0px; margin-top: 8px; text-align: center;"><span t-field="doc.waybill_date" t-field-options='{"format": "dd/MM/yyyy"}'/></p>
				                        </t>
				                        <t t-if="not doc.waybill_date">
				                        		<p style="border-bottom: 1px solid #606060; margin-right: 0px; margin-top: 8px; text-align: center; color: #d1d1d1;">DD/MM/YYYY</p>
				                        </t>
				                		</div>

				                		<div class="col-xs-5 text-left" style="padding-right: 8px; padding-left: 8px">
				               					<strong>Confirmation :</strong>
				               					<t>
				               							<p style="border-bottom: 1px solid #606060; margin-right: 0px; margin-top: 8px; text-align: center;"><i>I hereby confirm the receipt of the goods listed above :</i></p>
				               					</t>
				               			</div>

				               			<div class="col-xs-4 text-left" style="padding-left: 8px;">
				               					<strong>Signature :</strong>
				               					<t>
				                						<p style="border-bottom: 1px dashed #606060; margin-right: 0px; margin-top: 8px; text-align: center; color: #d1d1d1;">RECIPIENT SIGNS HERE</p>
				                				</t>
				                		</div>
				               	</div>
		               	</tr>

		               	<tr t-if="doc.waybill_type in ['courier','dropship']">
				               	<div class="row" name="signatures-2-courier">
				                		<div class="col-xs-3 text-left" style="padding-right: 8px;">
				               					<strong>Delivery Date :</strong>
				                				<t t-if="doc.waybill_date">
				                        		<p style="border-bottom: 1px solid #606060; margin-right: 0px; margin-top: 8px; text-align: center;"><span t-field="doc.waybill_date" t-field-options='{"format": "dd/MM/yyyy"}'/></p>
				                        </t>
				                        <t t-if="not doc.waybill_date">
				                        		<p style="border-bottom: 1px solid #606060; margin-right: 0px; margin-top: 8px; text-align: center; color: #d1d1d1;">DD/MM/YYYY</p>
				                        </t>
				                		</div>

				                		<div class="col-xs-5 text-left" style="padding-right: 8px; padding-left: 8px">
				               					<strong>Processed by / Tracking Ref. :</strong>
				               					<t t-if="doc.tracking">
				                            <p style="border-bottom: 1px dashed #606060; margin-right: 0px; margin-top: 8px; text-align: center;"><span t-field="doc.delivered_by_id.dis_name"/> / <span t-field="doc.tracking"/></p>
				                        </t>
				                        <t t-if="not doc.tracking">
				                            <p style="border-bottom: 1px dashed #606060; margin-right: 0px; margin-top: 8px; text-align: center; color: #d1d1d1;">TRACKING REFERENCE NUMBER</p>
				                        </t>
				               			</div>

				               			<div class="col-xs-4 text-left" style="padding-left: 8px;">
				               					<t t-if="doc.delivered_by_id.image">
				               							<p style="border-bottom: 1px dashed #606060; margin-right: 0px; margin-top: 8px; text-align: center;">
				               									<img t-if="doc.delivered_by_id" t-att-src="'data:image/png;base64,%s' % doc.delivered_by_id.image" style="max-height: 35px; max-width: 160px;"/>
				               							</p>
				                        </t>
				                        <t t-if="not doc.delivered_by_id.image">
				                            <p style="border-bottom: 1px dashed #606060; margin-right: 0px; margin-top: 8px; text-align: center; color: #d1d1d1;">&#160;</p>
				                        </t>
				                		</div>
				               	</div>
				            </tr>
		            </div>

                <div class="oe_structure"/>
            </div>
        </t>
    </template>

        <template id="report_waybill_knc">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="knc_custom_addon.report_waybill_document" t-lang="doc.contact_id.lang"/>
                </t>
            </t>
        </template>

        <record id="report_way_bill" model="ir.actions.report">
            <field name="name">KNC Waybill</field>
            <field name="model">way.bill</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">knc_custom_addon.report_waybill_knc</field>
            <field name="report_file">knc_custom_addon.report_waybill</field>
            <field name="binding_model_id" ref="knc_custom_addon.model_way_bill"/>
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="base.paperformat_euro"/>
        </record>

        <!-- <record id="report_way_bill" string="KNC Waybill" model="way.bill" report_type="qweb-pdf"
            file="knc_custom_addon.report_waybill" name="knc_custom_addon.report_waybill_knc" menu="True"
        /> -->

        <!-- <record id="report_way_bill" model="ir.actions.report">
            <field name="paperformat_id" ref="base.paperformat_euro"/>
        </record> -->

    </data>
</odoo>