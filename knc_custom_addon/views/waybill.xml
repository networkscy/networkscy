<?xml version="1.0" encoding="UTF-8"?>
<odoo> <!-- Code Checked & Confirmed by Panos on ../../2022 -->
    <data>

        <!-- Waybills - Tree View -->
        <record id="way_bill_list" model="ir.ui.view">
            <field name="name">way.bill.list</field>
            <field name="model">way.bill</field>
            <field name="arch" type="xml">
                <tree string="Waybills" decoration-bf="message_needaction==True" decoration-primary="state=='progress'" decoration-danger="state=='proof'" decoration-warning="state=='archived'" decoration-success="state=='converted'" decoration-muted="lock_transfer==True" default_order="waybill_date desc, name desc">
                    <field name="message_needaction" invisible="1"/>
                    <field name="id" invisible="1"/>
                    <field name="name"/>
                    <field name="waybill_date" widget="date"/>
                    <field name="partner_id"/>
                    <field name="contact_id" invisible="1"/>
                    <field name="partner_shipping_id" invisible="1"/>
                    <field name="project_id"/>
                    <field name="note_ref"/>
                    <field name="order_id"/>
                    <field name="waybill_type"/>
                    <field name="delivered_by_id" invisible="1"/>
                    <field name="received_by" invisible="1"/>
                    <field name="tracking" invisible="1"/>
                    <field name="issued_by_id" invisible="1"/>
                    <field name="issued_date" widget="date" invisible="1"/>
                    <field name="picking_ids" widget="many2many_tags" invisible="1"/>
                    <field name="note" invisible="1"/>
                    <field name="file_name" invisible="1"/>
                    <field name="proof"/>
                    <field name="checked_state" string="Check State" invisible="1"/>
                    <field name="state" string="Waybill State"/>
                    <field name="invoice_status"/>
                    <field name="delivery_status"/>
                    <field name="lock_transfer" string="Locked"/>
                    <field name="create_uid" string="Created by" invisible="1"/>
                    <field name="create_date" string="Created on" invisible="1"/>
                    <field name="write_uid" string="Modified by" invisible="1"/>
<!--                    <field name="__last_update" string="Modified on" invisible="1"/>-->
                    <field name="active" string="Active" invisible="1"/>
                    <field name="company_id"/>
                </tree>
            </field>
        </record>

        <!-- Waybills - Form View -->
        <record id="way_bill_form" model="ir.ui.view">
            <field name="name">way.bill.form</field>
            <field name="model">way.bill</field>
            <field name="arch" type="xml">
                <form string="Waybill">
                    <header>
                        <button name="button_lock" type="object" string="Lock" attrs="{'invisible': [('lock_transfer', '=', True)]}"/>
                        <button name="button_unlock" type="object" string="Unlock" class="oe_highlight" attrs="{'invisible': [('lock_transfer', '=', False)]}"/>
                        <field name="hide_action_buttons" invisible="True"/>
                        <field name="state" widget="statusbar" options="{'clickable': '1'}"/>
                    </header>
                    <header attrs="{'invisible': ['|',('state','=','draft'), ('state','=','prepared')]}">
                        <field name="checked_state" widget="statusbar" options="{'clickable': '1'}"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">
<!--                                <field name="active" widget="boolean_button" options="{&quot;terminology&quot;: &quot;archive&quot;}"/>-->
                            </button>
                            <!--<button name="update_dates" type="object" class="oe_stat_button" icon="fa-clock-o" string="Update Issue By &amp; Date"/>-->
                        </div>
                        <div style="margin: 14px;"></div>
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="waybill_type" widget='radio' options="{'horizontal': true}"/>
                                <field name="product_id" invisible="1"/>
                            </group>
                            <group>
                                <field name="proof" filename="proof_name" />
                                <field name="proof_name" invisible="1" class="oe_inline oe_right"/>
                                <field name="file_name"/>
                            </group>
                            <group>
                                <field name="partner_id" domain="[('is_courier', '!=', True)]" options="{'no_create': True}"/>
                                <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                            </group>
                            <group>
                                <field name="note_ref"/>
                            </group>
                            <group>
                                <field name="project_id" options="{'no_create': True}"/>
                                <label for="order_id"/>
                                <div class="o_row">
                                    <field name="order_id" domain="[('new_project_id','=',project_id), ('state','not in',['cancel','revise']), ('invoice_status','not in',['invoiced'])]" options="{'no_create': True}" class="oe_inline" help="Related Sales Orders with Status = Invoiced are Not Displayed"/>
                                    <field name="class_ref" class="oe_inline"/>
                                </div>
                            </group>
                            <group>
                                <field name="contact_id" options="{'no_create': True}"/>
                                <field name="partner_shipping_id" domain="[('is_courier', '!=', True)]" options="{'no_create': True}"/>
                            </group>
                        </group>
                        <hr/>
                        <notebook>
                            <page string="Waybill Lines">
                                <field name="bill_lines">
                                    <tree string="Waybill Lines" editable="bottom" decoration-warning="qty_on_hand&lt;=0" decoration-danger="qty&lt;=0" decoration-success="chk==True" decoration-bf="chk_trf==True">
                                        <field name="sequence" widget="handle"/>
                                        <field name="sequence" string="Seq"/>
                                        <field name="product_id" options="{'no_create': True}"/>
                                        <field name="name" invisible="1"/>
                                        <field name="qty_on_hand" string="Stock Qty" help="Current Quantity in Stock excluding Waybilled Quantity"/>
<!--                                        <field name="actual_qty" string="Actual Qty" help="Current Quantity in Stock including Quantities in Waybills"/>-->
                                        <field name="product_state" string="Product Status"/>
                                        <field name="company_id" groups="base.group_multi_company"/>
                                        <!-- <field name="desc_attribute"/> Inherited from \knc_product_ext\views\product_view.xml -->
                                        <field name="qty"/>
                                        <field name="filter_on_so"/>
<!--                                        <field name="product_uom_id" readonly="1"/>-->
                                        <field name="lot_id" domain="[('product_id', '=', product_id)]" options="{'no_create': True}" widget="many2many_tags"/>
                                        <field name="section_id" context="{'acs_sale_id': parent.order_id}" domain="[('so_id','=',parent.order_id)]" options="{'no_create': True}"/>
                                        <field name="note"/>
                                        <field name="ref"/>
                                        <field name="chk"/>
                                        <field name="chk_trf"/>
                                        <!--<field name="chk_trf" attrs="{'invisible': ['|',('state','!=','archived'), ('state','!=','converted')]}"/>-->

                                    </tree>
                                </field>
                            </page>
                        </notebook>
                        <group col="3">
                            <group>
                                <field name="issued_by_id" options="{'no_create': True}"/>
                                <field name="issued_date"/>
                            </group>
                            <group>
                                <field name="delivered_by_id" options="{'no_create': True}"/>
                                <field name="waybill_date" widget="date"/>
                            </group>
                            <group>
                                <field name="received_by"/>
                                <field name="received_by_company"/>
                                <field name="received_by_phone"/>
                            </group>
                            <group>
                                <field name="picking_ids" widget="many2many_tags" domain="[('project_id','=',project_id)]" options="{'no_create': True}"/>
                            </group>
                            <group>
                                <field name="tracking" attrs="{'invisible': ['|',('waybill_type','=','delivery'), ('waybill_type','=','pickup')]}" string="Tracking Reference"/>
                            </group>
                            <group>
                                <field name="contact_id_find" domain="[('is_courier', '!=', True)]" options="{'no_create': True}"/>
                            </group>
                        </group>
                        <group>
                            <field name="note" placeholder="Add an internal note which will not be printed on report"/>
                        </group>
                        <hr/>
                        <group col="3">
                            <group>
                                <field name="create_uid" string="Created by" readonly="1"/>
                                <field name="create_date" string="Created on" readonly="1"/>
                            </group>
                            <group>
                                <field name="write_uid" string="Modified by" readonly="1"/>
<!--                                <field name="__last_update" string="Modified on" readonly="1"/>-->
                            </group>
                            <group>
                                <field name="id" readonly="1"/>
                                <field name="lock_transfer" string="Locked" readonly="1"/>
                            </group>
                            <group>
<!--                                <button name="update_dates" type="object" class="oe_inline fa fa-arrow-right oe_link" string="Update Issue By &amp; Date" groups="knc_extension.group_knc_admin"/>-->
                                <button name="update_dates" type="object" class="oe_inline fa fa-arrow-right oe_link" string="Update Issue By &amp; Date"/>
                            </group>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
<!--                        <field name="message_follower_ids" widget="mail_followers"/>-->
<!--                        <field name="message_ids" widget="mail_thread"/>-->
                    </div>
                </form>
            </field>
        </record>
        <record id="way_bill_line_list" model="ir.ui.view">
            <field name="name">way.bill.line.list</field>
            <field name="model">way.bill.lines</field>
            <field name="arch" type="xml">
                <tree string="Waybill Lines" decoration-warning="qty_on_hand&lt;=0" decoration-danger="qty&lt;=0" decoration-success="chk==True" decoration-bf="chk_trf==True">
                    <field name="sequence" widget="handle"/>
                    <field name="sequence" string="Seq"/>
                    <field name="product_id" options="{'no_create': True}"/>
                    <field name="name" invisible="1"/>
                    <field name="qty_on_hand"/>
                    <field name="product_state"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <!-- <field name="desc_attribute"/> Inherited from \knc_product_ext\views\product_view.xml -->
                    <field name="qty"/>
                    <field name="filter_on_so"/>
<!--                    <field name="product_uom_id" readonly="1"/>-->
                    <field name="lot_id" domain="[('product_id', '=', product_id)]" options="{'no_create': True}" widget="many2many_tags"/>
                    <field name="section_id" context="{'acs_sale_id': parent.order_id}" domain="[('so_id','=',parent.order_id)]" options="{'no_create': True}"/>
                    <field name="note"/>
                    <field name="ref"/>
                    <field name="chk"/>
                    <field name="chk_trf"/>
                    <!--<field name="chk_trf" attrs="{'invisible': ['|',('state','!=','archived'), ('state','!=','converted')]}"/>-->

                </tree>
            </field>
        </record>
        <record id="way_bill_line_form" model="ir.ui.view">
            <field name="name">way.bill.line.form</field>
            <field name="model">way.bill.lines</field>
            <field name="arch" type="xml">
                <form string="Waybill">
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="product_id"/>
                                <field name="qty_on_hand"/>
                                <field name="product_state"/>
                            </group>
                            <group>
                                <field name="qty"/>
                                <field name="filter_on_so"/>
<!--                                <field name="product_uom_id" readonly="1"/>-->
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                                <field name="lot_id" domain="[('product_id', '=', product_id)]" options="{'no_create': True}" widget="many2many_tags"/>
                                <field name="section_id" context="{'acs_sale_id': parent.order_id}" domain="[('so_id','=',parent.order_id)]" options="{'no_create': True}"/>
                            </group>
                            <group>
                                <field name="ref"/>
                                <field name="chk"/>
                                <field name="chk_trf"/>
                            </group>
                        </group>
                        <group>
                            <field name="note"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Waybills - Search Menu -->
        <record id="way_bill_filter" model="ir.ui.view">
           <field name="name">way.bill.search</field>
           <field name="model">way.bill</field>
           <field name="arch" type="xml">
               <search string="Waybills">

                   <field name="name" string="Waybill Name"/>
<!--                   <field name="partner_id" string="Related Partner"/>-->
<!--                   <field name="project_id" string="Related Project"/>-->
<!--                   <field name="product_id" string="Related Product"/>-->
<!--                   <field name="order_id" string="Related Sales Order"/>-->
<!--                   <field name="note_ref" string="Waybill Reference Note"/>-->
<!--                   <field name="lot_ids" string="Lot Id"/>-->
<!--                   <separator/>-->

<!--                   <filter name="draft_state" string="Draft" domain="[('state','=','draft')]"/>-->
<!--                   <filter name="prepared_state" string="Picking &amp; Packing" domain="[('state','=','prepared')]"/>-->
<!--                   <filter name="progress_state" string="Ready for Pickup" domain="[('state','=','progress')]"/>-->
<!--                   <filter name="delivering_state" string="Delivering to Site" domain="[('state','=','delivering')]"/>-->
<!--                   <filter name="proof_state" string="Waiting for Proof" domain="[('state','=','proof')]"/>-->
<!--                   <filter name="archived_state" string="Scanned &amp; Archived" domain="[('state','=','archived')]"/>-->
<!--                   <filter name="converted_state" string="Converted to Stock Transfer" domain="[('state','=','converted')]"/>-->

<!--                   <separator/>-->
<!--                   <filter name="inactive" string="Archived" domain="[('active','=',False)]"/>-->
<!--                   <separator/>-->

<!--                   <group expand="0" string="Group By">-->
<!--                       <filter string="Company" domain="[]" context="{'group_by':'company_id'}"/>-->
<!--                       <filter string="Check State" domain="[]" context="{'group_by':'checked_state'}"/>-->
<!--                       <filter string="Waybill Type" domain="[]" context="{'group_by':'waybill_type'}"/>-->
<!--                       <filter string="Waybill State" domain="[]" context="{'group_by':'state'}"/>-->
<!--                       <filter string="Related Project" domain="[]" context="{'group_by':'project_id'}"/>-->
<!--                       <filter string="Related Sales Order" domain="[]" context="{'group_by':'order_id'}"/>-->
<!--                   </group>-->

               </search>
           </field>
        </record>
        <!-- Waybills - Action for Menu -->
        <record id="way_bill_class" model="ir.actions.act_window">
            <field name="name">Waybills</field>
<!--            <field name="type">ir.actions.act_window</field>-->
            <field name="res_model">way.bill</field>
<!--            <field name="view_type">form</field>-->
            <field name="view_mode">tree,kanban,form</field>
            <field name="context">{'search_default_not_completed':1, 'search_default_not_converted':1}</field>
            <field name="search_view_id" ref="way_bill_filter"/>
        </record>

        <record id="way_bill_line_action" model="ir.actions.act_window">
            <field name="name">Waybill Lines</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">way.bill.lines</field>
<!--            <field name="view_type">form</field>-->
            <field name="view_mode">tree,form</field>
        </record>

    </data>
</odoo>